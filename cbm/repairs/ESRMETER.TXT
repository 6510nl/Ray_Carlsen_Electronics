                       A POOR MAN'S ESR METER

     One type of failure in an electrolytic capacitor is increased Effective Series Resistance or ESR. It happens as a result of the capacitor's electrolyte drying out with heat (both internal and external) over time. High ESR makes the capacitor less effective, especially in critical circuits such as switching power supplies. Standard capacitance checkers may fail to show a problem. They may show normal readings for capacitance values and leakages. True ESR testers are usually very expensive.
     A simple method of checking an electrolytic cap for higher than normal ESR involves the use of a square wave generator and an oscilloscope. Most scopes have a 1KHz square wave calibrator built into them for setting up the scope probe, and that works as a signal source if a generator is not available. The idea is to run a square wave through a series resistor to the capacitor under test, then monitor the waveform across the cap with the scope. This tester can be used in-circuit as long as all power and grounds are disconnected from the device under test and all caps are discharged. 
     Test setup: a 1KHz 0.5VPP square wave generator (or the 1KHz calibrator output of a scope) is fed through a 1K resistor to a 1uF capacitor. The scope shows the expected triangle wave across the capacitor, indicating it is charging and discharging linearly. If large value caps are tested, the waveform is reduced to near zero, requiring either the signal source or scope gain to be increased so a waveform is visible.  
Simulated capacitor failures:
     If one leg of the cap is opened and a bit of series resistance (10 ohms) is introduced (simulating higher than normal ESR), the peak positive and negative excursions of the triangle wave have a "gap" or vertical component to them. This indicates that as the cap starts charging/discharging, some resistance is "seen" by the voltage source. As the added series resistance is increased (100 ohms), the waveform changes to a modified triangle with a greatly increased amount of vertical displacement. If the capacitor series resistance is very high (1 K ohm), the waveform remains a square wave but is just reduced in amplitude. 
     In actual practice, the waveforms are somewhat different than the above simulated ones. Bad caps will show varing amounts of slope and/or rolloff in the top and bottom excursions and many will only reduce the amplitude of the square wave without altering it's waveshape. Really bad caps will show reduced capacitance on a standard cap checker. 
     If a capacitor is leaky (actually quite rare), the effect on the waveform is to cause the triangle waveform to "bend" into a sawtooth because the ramp up and down is no longer linear. Combinations of high ESR and leakage will further distort the waveform. 

     If this method is used to check capacitors in-circuit, keep in mind that other circuit components can affect the readings. Therefore, it's best to keep the source AC square wave signal under 0.5VPP. This will prevent standard diode conduction from distorting the readings. Inductors can introduce ripples, ringing, or spikes to the waveform. 
If in doubt, disconnect one end of the cap from the circuit and check it again. 
     A few problems arise when checking caps this way. The scope calibrator output impedence is a factor. If it is excessively loaded, it's output will distort unpredictably and change the cap waveform as well. That's why an external generator is preferable. As the value of the cap under test increases, the energy required to charge and discharge it increases also. For caps over 100uF, lower value of series resistance to the calibrator will compensate for the loss, but again, the calibrator output may be overloaded. 

